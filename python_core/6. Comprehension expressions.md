# Comprehension expressions

```python
L = [x ** 2 for x in range(1,4)]
S = {x ** 2 for x in range(1,4)}
D = {x: x ** 2 for x in range(1,4)}

# Generator

G = (x ** 2 for x in range(1,4))
```

#### Show that scope is localized but in for loops

```python
Y = 33
L = [Y for Y in range(3)]

print(L)
print(Y)

> [0, 1, 2]
> 33

S = set()
for Y in range(3):
     S.add(Y)

print(S)
print(Y)

> {0, 1, 2}
> 2
```

## 1. List comprehensions

```python
R = [ord(x) for x in 'abcd']
print(R)

> [97, 98, 99, 100]
```

#### Create simple list with list comprehension expression

```python
L = [x ** 2 for x in [1, 2, 3]]
print(L)

> [1, 4, 9]
```

#### Show extended list comprehension syntax with filtering

```python
L = [x ** 2 for x in range(1, 10) if x % 2 == 0]
print(L)

> [4, 16, 36, 64]
```

#### 3.1.2. Create a list comprehension expression of extractin even numbers from the list

```python
R = [x for x in range(-10, 10, 1) if x % 2 == 0]
print(R)

> [-10, -8, -6, -4, -2, 0, 2, 4, 6, 8]
```

#### 3.1.3. Create the same function with the filter call

```python
L = range(-3, 5, 1)
R = list(filter((lambda x: x if (x % 2) == 0 else None), L))
print(R)

> [-2, 2, 4]
```

#### Show how to create nested list comprehension expression

```python
L = [x + y for x in 'abc' for y in 'ABC' ]
print(L)

> ['aA', 'aB', 'aC', 'bA', 'bB', 'bC', 'cA', 'cB', 'cC']
```

#### 3.1.4. Create list comprehension expression with two expression in one: return list of elements, their squares, their power three and so on, in one list

```python
L = [x ** y for y in range(1, 5) for x in range(1, 4)]

print(L)

> [1, 2, 3, 1, 4, 9, 1, 8, 27, 1, 16, 81]
```

```python
L = [(x, y, x ** y) for x in range(1, 5) for y in range(1, 4)]

print(L)

> 
[(1, 1, 1), (1, 2, 1), (1, 3, 1), (2, 1, 2), (2, 2, 4), (2, 3, 8), (3, 1, 3), (3, 2, 9), (3, 3, 27), (4, 1, 4), (4, 2, 16), (4, 3, 64)]
```

#### 3.1.5. Complicated comprehension with ifs

```python
L = [x + y + z for x in 'spam' if x in 'sm' for y in 'SPAM' if y in ('P', 'A') for z in '123' if z > '1']

print(L)

> ['sP2', 'sP3', 'sA2', 'sA3', 'mP2', 'mP3', 'mA2', 'mA3']
```

#### 3.1.6. Return a multiplication of all even with all odd numbers in arbitrary list

```python
L = [x * y for x in range(1, 5) if x % 2 == 0 for y in range(1, 5) if y % 2 == 1]

print(L)

> [2, 6, 4, 12]
```

### 3.2. List comprehensions and matrixes

#### 3.2.1. Get the sums of matrix row elements

```python

M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

S = [sum(row) for row in M]

print(S)

> [6, 15, 24]
```

#### 3.2.2. Get the sum of one matrix column elements

Get matrix column:

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]
col2 = [row[1] for row in M]
col2
> [2, 5, 8]
```

```python

M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

S = sum([row[2] for row in M])

print(S)

> 18
```

#### 3.2.3. Get the list of sums of matrix colums elements

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

S = [sum([row[x] for row in M]) for x in range(0, len(M[0]))]
print(S)

> [12, 15, 18]
```

#### 3.2.4. Create an expression which transforms matrix

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

T = [[row[x] for row in M] for x in range(0, len(M[0]))]

print(T)

> [[1, 4, 7], [2, 5, 8], [3, 6, 9]]
```

#### 3.2.5. Get diagonal of matrix

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

D = [M[x][x] for x in range(len(M[0]))]

print(D)

> [1, 5, 9]
```

```python
M = [['a' + str(x) + str(y) for y in range(1,3)] for x in range(1,3)]
> [['a11', 'a12'], ['a21', 'a22']]
```

#### Flatten matrix (by row)

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

F = [x for row in M for x in row]

print(F)

> [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

#### Flatten matrix (by column)

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

F = [row[x] for x in range(len(M[0])) for row in M ]

print(F)

> [1, 4, 7, 2, 5, 8, 3, 6, 9]
```

#### Create an expression which counts matrixes multiplication (don't use zip)

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

N = [[5, 4, 3],
     [2, 1, 6],
     [9, 8, 7]]

P = [[M[x][y] * N[x][y] for y in range(len(M[0]))] for x in range(len(M))]

print(P)

> [[5, 8, 9], [8, 5, 36], [63, 64, 63]]
```

#### Do the same with zip

```python
M = [[1, 2, 3],
     [4, 5, 6],
     [7, 8, 9]]

N = [[5, 4, 3],
     [2, 1, 6],
     [9, 8, 7]]

P = [[col_M * col_N for col_M, col_N in zip(row_M, row_N)] for row_M, row_N in zip(M, N)]

print(P)

> [[5, 8, 9], [8, 5, 36], [63, 64, 63]]
```

##### Create an E matrix with specific size

```python
n = 4
E = [[1 if x == y else 0 for y in range(n)] for x in range(n)]
E
> [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]
```



## Sets

### Bla-bla

#### Create a set of odd numbers

```python
S = {x for x in range(1, 10) if x % 2 == 1}

print(S)

> {1, 3, 5, 7, 9} # Set can be not ordered
```

## Dictioinaries

### Bla-bla

#### Create a dictionary of ...

```python
keys = [1, 2, 3]
vals = ['one', 'two', 'three']
D = {x: y.upper() for x, y in zip(keys, vals)}

print(D)

> {1: 'ONE', 2: 'TWO', 3: 'THREE'} # Dictionary can be not ordered
```

## Differences between lists, sets and dictionaries

#### Show what is ordered and what is not???

```python

```

#### Show what keeps duplicates and what doesn't

List keeps duplicates, but sets and dictionaries are not:

```python
L = [x + y for x in [1, 2, 3] for y in [4, 5, 6]]
S = {x + y for x in [1, 2, 3] for y in [4, 5, 6]}
D = {x + y: 'value' for x in [1, 2, 3] for y in [4, 5, 6]}

print(L)

> [5, 6, 7, 6, 7, 8, 7, 8, 9]

print(S)

> {5, 6, 7, 8, 9}

print(D)

> {5: (1, 4), 6: (2, 4), 7: (3, 4), 8: (3, 5), 9: (3, 6)}
```
